<app-sidebar1></app-sidebar1>
<div class="subscription-container">
  <h1>Mes Abonnements</h1>
  <div class="active-section">
    <h2>Abonnements Actifs</h2>
    
    <div *ngIf="activeSubscription.length > 0" class="subscriptions-list">
      <div *ngFor="let sub of activeSubscription" class="subscription-card">
        <div class="sub-header">
          <span class="sub-name">{{ sub.equipe }}</span>
          <span class="sub-plan">{{ sub.plan_name }}</span>
          <span class="sub-price">{{ sub.price }}€/mois</span>
        </div>
        <div class="sub-dates">
          <div><strong>Début:</strong> {{ sub.startdate || sub.startDate || 'N/A' }}</div>
          <div><strong>Fin:</strong> {{ sub.enddate || sub.endDate || 'N/A' }}</div>
        </div>
      </div>
    </div>

    <div *ngIf="activeSubscription.length === 0" class="no-subscription">
      Aucun abonnement actif
    </div>
  </div>

  <div class="form-section">
    <h2>Créer un nouvel abonnement</h2>

    <form (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label>Nom</label>
        <input 
          type="text" 
          [(ngModel)]="formData.nom" 
          name="nom"
          class="form-control"
        />
      </div>

      <div class="form-group">
        <label>Prénom</label>
        <input 
          type="text" 
          [(ngModel)]="formData.prenom" 
          name="prenom"
          class="form-control"
        />
      </div>

      <div class="form-group">
        <label>Email</label>
        <input 
          type="email" 
          [(ngModel)]="formData.email" 
          name="email"
          class="form-control"
        />
      </div>

      <div class="form-group">
        <label>choisir une equipe</label>
        <select 
          [(ngModel)]="selectedequipe" 
          name="equipe"
          class="form-control1"
        >
          <option value="">-- Sélectionner --</option>
          <option *ngFor="let equipe of equipes" [value]="equipe.id1">
            {{  equipe.name }} - 
          </option>
        </select>
      </div>

      <div class="form-group">
        <label>Choisir un plan</label>
        <select 
          [(ngModel)]="selectedPlan" 
          name="plan"
          class="form-control"
        >
          <option value="">-- Sélectionner --</option>
          <option *ngFor="let plan of plans" [value]="plan.id">
            {{ plan.name }} - {{ plan.price }}€/mois
          </option>
        </select>
      </div>

      <button type="submit" class="btn-submit">
        Enregistrer
      </button>
    </form>
  </div>
</div>